2
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Short Video Feed</title>
 
<style>
  /* ===== THEME (set to your brand) ===== */
  :root {
    --brand-bg: #0f1115;
    --brand-surface: #151a21;
    --brand-text: #f5f7fa;
    --brand-accent: #35c2a1;
    --muted-text: #9aa4b2;
    --danger: #e64646;
  }

  html, body {
    height: 100%;
    background: var(--brand-bg);
    color: var(--brand-text);
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }

  /* Make the app wider for laptop screens */
  .app {
    max-width: 1024px;          /* was 480px */
    margin: 0 auto;
    height: 100vh;
    display: flex;
    flex-direction: column;
  }

  header {
    display: flex;
    align-items: center;
    gap: .75rem;
    padding: .75rem 1rem;
    background: var(--brand-surface);
    position: sticky;
    top: 0;
    z-index: 10;
    border-bottom: 1px solid #202631;
  }

  header img.logo { width: 24px; height: 24px; border-radius: 4px; }
  header h1 { font-size: 1rem; margin: 0; }

  .feed {
    flex: 1;
    overflow-y: auto;
    scroll-snap-type: y mandatory;
  }

  .card {
    scroll-snap-align: start;
    padding: 12px 12px 24px;
    border-bottom: 1px solid #202631;
  }

  /* Switch to horizontal (laptop) aspect ratio */
  .video-wrap {
    position: relative;
    background: #000;
    border-radius: 12px;
    overflow: hidden;
    aspect-ratio: 16 / 9;       /* was 9 / 16 */
  }

  .video-wrap video {
    width: 100%;
    height: 100%;
    object-fit: cover;          /* Use 'contain' for letterboxed playback */
  }

  .overlay {
    position: absolute;
    inset: auto 8px 8px auto;
    display: flex;
    flex-direction: column;
    gap: .5rem;
  }

  .cta {
    display: flex;
    gap: .5rem;
    align-items: center;
    background: rgba(21,26,33,.75);
    color: #fff;
    border-radius: 999px;
    padding: .35rem .6rem;
    border: 1px solid rgba(255,255,255,.15);
    backdrop-filter: blur(6px);
  }

  .cta button {
    appearance: none;
    border: 0;
    background: transparent;
    color: #fff;
    cursor: pointer;
  }

  .cta .count { font-size: .9rem; color: #fff; }

  .meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: .5rem;
    color: var(--muted-text);
    font-size: .9rem;
  }

  .title { font-weight: 600; color: var(--brand-text); margin: .5rem 0 0; }
  .comments { margin-top: .5rem; background: var(--brand-surface); border-radius: 8px; padding: .5rem; }
  .comments h3 { font-size: .95rem; margin: .25rem 0 .5rem; color: var(--brand-text); }
  .comment { display: flex; gap: .5rem; border-top: 1px solid #202631; padding: .5rem 0; }
  .comment:first-child { border-top: 0; }
  .comment .author { font-weight: 600; color: var(--brand-text); }
  form.comment-form { display: flex; gap: .5rem; margin-top: .5rem; }
  form.comment-form input[type="text"] {
    flex: 1; background: #0f1218; color: #fff; border: 1px solid #202631; border-radius: 999px; padding: .5rem .75rem;
  }
  form.comment-form button {
    background: var(--brand-accent); color: #00130d; border: 0; border-radius: 999px; padding: .5rem .75rem; cursor: pointer; font-weight: 600;
  }
  .badge { background: #0f1218; color: var(--muted-text); border: 1px solid #202631; border-radius: 6px; padding: .25rem .5rem; font-size: .8rem; }
  .sr-only { position: absolute; left: -9999px; }
  footer { padding: .75rem 1rem; text-align: center; color: var(--muted-text); font-size: .85rem; }
</style>
  
</head>
<body>
  <div class="app" role="application" aria-label="Short video feed">
    <header>
      <!-- Swap the logo to 6sense SVG/PNG -->
      <img class="logo" src="https://dummyimage.com/48x48/35c2a1/ffffff.png&text=6s" alt="Brand logo">
      <h1>Enablement Shorts</h1>
      <span class="badge" title="2–3 min videos">2–3 min</span>
    </header>
    <main class="feed" id="feed" tabindex="0">
      <!-- Cards are injected by JS -->
    </main>
    <footer>Tip: use ↑/↓ or swipe to move between videos.</footer>
  </div>

  <script>
    // ===== SAMPLE DATA (replace with your CMS) =====
    const videos = [
      {
        id: "v1",
        title: "RevvyAI Demo",
        src: "./assets/videos/Revvy_demo2.mp4", // replace with your files
        durationSec: 47, // 0:47
        captionsVtt: "",  // add a .vtt captions URL if you have it
      },
      {
        id: "v2",
        title: "Playbook: ICP refresh in Seismic",
        src: "https://cdn.coverr.co/videos/coverr-exploring-the-app-store-6210/1080p.mp4",
        durationSec: 165, // 2:45
        captionsVtt: "",
      },
      {
        id: "v3",
        title: "Pricing FAQ: RevAI add-on (quick hits)",
        src: "https://cdn.coverr.co/videos/coverr-scroll-the-feed-3607/1080p.mp4",
        durationSec: 115, // 1:55
        captionsVtt: "",
      }
    ].filter(v => v.durationSec <= 180); // enforce 3-min cap

    // ===== PERSISTENCE (localStorage for prototype) =====
    const LS = {
      likes: "svf_likes",
      comments: "svf_comments"
    };
    const getLikes = () => JSON.parse(localStorage.getItem(LS.likes) || "{}");
    const setLikes = (obj) => localStorage.setItem(LS.likes, JSON.stringify(obj));
    const getComments = () => JSON.parse(localStorage.getItem(LS.comments) || "{}");
    const setComments = (obj) => localStorage.setItem(LS.comments, JSON.stringify(obj));

    // ===== RENDER =====
    const feedEl = document.getElementById("feed");

    function render() {
      const likes = getLikes();
      const comments = getComments();

      feedEl.innerHTML = videos.map(v => {
        const likeCount = (likes[v.id] || 0);
        const thread = (comments[v.id] || []);
        return `
          <article class="card" id="card-${v.id}" aria-label="${escapeHtml(v.title)}">
            <div class="video-wrap">
              <video id="vid-${v.id}" src="${v.src}" playsinline muted preload="metadata" controls aria-label="${escapeHtml(v.title)}"></video>
              <div class="overlay" aria-hidden="false">
                <div class="cta">
                  <button aria-label="Like video" data-like="${v.id}" title="Like">❤️</button>
                  <span class="count" id="like-count-${v.id}" aria-live="polite">${likeCount}</span>
                </div>
              </div>
            </div>
            <div class="meta">
              <span>${formatDuration(v.durationSec)}</span>
              <span class="muted">Autoplay is muted; unmute in player</span>
            </div>
            <h2 class="title">${escapeHtml(v.title)}</h2>

            <section class="comments" aria-label="Comments">
              <h3>Comments</h3>
              <div id="comments-${v.id}">
                ${thread.length === 0 ? `<p class="muted">Be the first to comment.</p>` :
                  thread.map(c => commentHtml(c)).join("")}
              </div>
              <form class="comment-form" data-form="${v.id}">
                <label class="sr-only" for="c-${v.id}">Add comment</label>
                <input id="c-${v.id}" type="text" name="text" minlength="1" maxlength="280" placeholder="Add a comment…" required />
                <button type="submit">Post</button>
              </form>
            </section>
          </article>
        `;
      }).join("");

      attachEvents();
      setupAutoPlay();
    }

    // ===== EVENTS =====
    function attachEvents() {
      // Like buttons
      feedEl.querySelectorAll("[data-like]").forEach(btn => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-like");
          const likes = getLikes();
          likes[id] = (likes[id] || 0) + 1;
          setLikes(likes);
          document.getElementById(`like-count-${id}`).textContent = likes[id];
          // TODO: backend hook (see below)
          // fetch("/api/likes", { method:"POST", headers:{ "Content-Type":"application/json" }, body: JSON.stringify({ videoId:id })});
        });
      });
      // Comment forms
      feedEl.querySelectorAll("form.comment-form").forEach(form => {
        form.addEventListener("submit", (e) => {
          e.preventDefault();
          const id = form.getAttribute("data-form");
          const input = form.querySelector("input[name='text']");
          const text = input.value.trim();
          if (!text) return;
          const comments = getComments();
          const entry = {
            id: crypto.randomUUID(),
            author: currentUser(), // replace with Seismic/M365 identity
            text,
            ts: new Date().toISOString()
          };
          comments[id] = [entry, ...(comments[id] || [])];
          setComments(comments);
          document.getElementById(`comments-${id}`).insertAdjacentHTML("afterbegin", commentHtml(entry));
          input.value = "";
          // TODO: backend hook
          // fetch("/api/comments", { method:"POST", headers:{ "Content-Type":"application/json" }, body: JSON.stringify({ videoId:id, ...entry })});
        });
      });

      // Keyboard nav (↑/↓ to snap)
      feedEl.addEventListener("keydown", (e) => {
        if (e.key === "ArrowDown") snapTo(1);
        if (e.key === "ArrowUp") snapTo(-1);
      });
    }

    function snapTo(delta) {
      const cards = Array.from(document.querySelectorAll(".card"));
      const top = feedEl.scrollTop;
      const idx = cards.findIndex(c => c.offsetTop >= top - 10);
      const next = Math.min(cards.length - 1, Math.max(0, (idx < 0 ? 0 : idx) + delta));
      feedEl.scrollTo({ top: cards[next].offsetTop, behavior: "smooth" });
    }

    // ===== AUTOPLAY/PAUSE per card =====
    function setupAutoPlay() {
      const obs = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          const v = entry.target.querySelector("video");
          if (!v) return;
          if (entry.isIntersecting && entry.intersectionRatio > 0.75) {
            v.play().catch(() => {});
          } else {
            v.pause();
          }
        });
      }, { root: feedEl, threshold: [0.0, 0.5, 0.75, 1.0] });
      document.querySelectorAll(".card").forEach(c => obs.observe(c));
    }

    // ===== UTIL =====
    function formatDuration(sec) {
      const m = Math.floor(sec / 60); const s = sec % 60;
      return `${m}:${String(s).padStart(2, '0')} min`;
    }
    function escapeHtml(s) { return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }
    function commentHtml(c) {
      const date = new Date(c.ts).toLocaleString();
      return `<div class="comment"><div class="author">${escapeHtml(c.author)}</div><div class="text">${escapeHtml(c.text)}</div><div class="muted" style="margin-left:auto">${date}</div></div>`;
    }
    function currentUser() {
      // Replace with identity from Seismic SSO or Microsoft Entra ID.
      // For prototype, a simple alias:
      return "You";
    }

    // ===== BACKEND INTEGRATION HOOKS =====
    /*
      When ready, replace localStorage with your services:
      - Likes: POST /api/likes { videoId } and GET /api/likes/:videoId -> { count }
      - Comments: POST /api/comments { videoId, id, author, text, ts }, GET /api/comments/:videoId -> [ ... ]

      Good choices:
      • SharePoint list (columns: VideoId, Author, Text, Timestamp, LikeCount)
      • Azure Functions + Cosmos DB or Table Storage
      • Power Automate using the Seismic connector for telemetry flows
    */
    render();
  </script>
</body>
</html>
// Container to force height

<script>
  function postHeight() {
    const h = Math.max(
      document.body.scrollHeight,
      document.documentElement.scrollHeight
    );
    window.parent.postMessage({ type: 'EMBED_HEIGHT', height: h }, '*');
  }
  // Post on load and whenever content changes
  window.addEventListener('load', postHeight);
  new MutationObserver(postHeight).observe(document.body, { childList: true, subtree: true });
  window.addEventListener('resize', postHeight);
</script>

